{% extends 'base.html' %}

{% block title %} Vendors {% endblock title %}

{% block body %}
{% include 'include/header.html' %}

<section class="text-center py-5 mt-3">
   <div class="container center">
      <h2>Find the right vendor</h2>
      
      <form class="srch">
         <div class="form-group mb-3">
            <label for="service" class="form-label">Category:</label>
            <select name="service" id="service" class="form-control">
               {% for vendor_type in vendor_categories %}
                  <option value="{{ vendor_type.id }}">{{ vendor_type.name }}</option>
               {% endfor %}
            </select>
         </div>

         <div class="form-group mb-3">
            <label for="location" class="form-label">Near:</label>
            <input type="text" class="form-control" name="location" id="location" placeholder="Westlands, Nairobi">
         </div>
         <button type="submit" class="btn btn-primary">Search</button>
      </form>
   </div>
</section>

<hr>

<section class="vendors-page">
   <div class="container">
      <!-- <p class="m-0">
         <i class="fas fa-search"></i>
         <span>Wedding venue near Westlands Nairobi</span>
      </p> -->

      <div class="row row-cols-1 row-cols-md-4 g-4 py-3" id="vendors-grid"></div>
   </div>      
</section>
{% endblock body %}

{% block scripts %}
{% load static %}
<script src="{% static 'js/bookmarks.js' %}"></script>

<script>

   window.addEventListener('load', () => {
      getAllVendors();
   });

   async function getAllVendors() {
      url = `${LOCALHOST}/vendors/`;

      let handleResponse = async function (response) {
         let vendors = await response.json();
         console.log('vendors');
         console.log(vendors);
         renderVendors(vendors);
         activateBookmarkStatus();
      }
      fetchRequest(handleResponse, url, 'GET');
   }

</script>
{% endblock scripts %}